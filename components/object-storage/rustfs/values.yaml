# ------------------------------------------------------------------
# APP CONFIGURATION
# ------------------------------------------------------------------
replicaCount: 4

image:
  repository: rustfs/rustfs
  pullPolicy: IfNotPresent
  tag: "latest"

auth:
  accessKey: "rustfsadmin"
  secretKey: "rustfsadmin"

config:
  s3Port: 9000
  consolePort: 9001
  consoleEnable: true
  logLevel: "info"
  logDirectory: "/logs"

  # TLS is handled by Gateway (Edge), so we disable it internally
  tls:
    enabled: false
    secretName: ""

# ------------------------------------------------------------------
# NETWORKING (Gateway API)
# ------------------------------------------------------------------
service:
  type: ClusterIP

gateway:
  # Placeholder defaults (Helmfile injects the real ones)
  name: internet-gateway
  namespace: default
  hosts:
    s3: "s3.localhost"
    console: "console.localhost"

# ------------------------------------------------------------------
# STORAGE & RESOURCES
# ------------------------------------------------------------------
storage:
  size: 10Gi
  storageClass: ""

resources: {}

probes:
  liveness:
    enabled: true
    spec:
      httpGet:
        path: /health
        port: s3-api
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
  readiness:
    enabled: true
    spec:
      httpGet:
        path: /health
        port: s3-api
      initialDelaySeconds: 15
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3

# -- ServiceAccount configuration
serviceAccount:
  create: true
  annotations: {}
  name: ""

# -- Security Context
securityContext:
  enabled: true
  runAsUser: 1000
  runAsGroup: 1000
  initContainer:
    image:
      repository: busybox
      tag: "latest"
      pullPolicy: IfNotPresent
