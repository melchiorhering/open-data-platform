Your RustFS instance has been deployed.

1. **Get your Access and Secret Keys**

   The keys are stored in the secret: {{ include "rustfs.fullname" . }}-secret

   {{- /* Safely lookup the secret. This will be 'nil' during 'helm lint'. */}}
   {{- $secret := (lookup "v1" "Secret" .Release.Namespace (printf "%s-secret" (include "rustfs.fullname" .))) }}
   {{- $accessKey := "" }}
   {{- $secretKey := "" }}

   {{- /* Only try to decode the keys IF the secret was found. */}}
   {{- if $secret }}
     {{- $accessKey = (index $secret.data "RUSTFS_ACCESS_KEY") | b64dec }}
     {{- $secretKey = (index $secret.data "RUSTFS_SECRET_KEY") | b64dec }}
   {{- end }}

   Access Key:
   {{- /* Fallback command if lookup fails (e.g., dry-run) */}}
   {{- $accessKey | default (printf "echo $(kubectl get secret %s-secret -n %s -o jsonpath='{.data.RUSTFS_ACCESS_KEY}' | base64 -d)" (include "rustfs.fullname" .) .Release.Namespace) }}

   Secret Key:
   {{- /* Fallback command if lookup fails */}}
   {{- $secretKey | default (printf "echo $(kubectl get secret %s-secret -n %s -o jsonpath='{.data.RUSTFS_SECRET_KEY}' | base64 -d)" (include "rustfs.fullname" .) .Release.Namespace) }}

2. **Access the S3 API**

   The S3 API is exposed via the Cilium Gateway.

   **URL:** https://{{ .Values.gateway.hosts.s3 }}

   To access this locally, ensure your tunnel is running (`just connect`).

   **Configure MinIO Client (mc):**
   mc alias set myrustfs https://{{ .Values.gateway.hosts.s3 }} <ACCESS_KEY> <SECRET_KEY>

3. **Access the Console**

   {{- if .Values.config.consoleEnable }}
   The Console is exposed via the Cilium Gateway.

   **URL:** https://{{ .Values.gateway.hosts.console }}

   To access this locally, ensure your tunnel is running (`just connect`), then open the URL in your browser.
   {{- else }}
   The console is disabled. Set `config.consoleEnable=true` in values.yaml to enable it.
   {{- end }}